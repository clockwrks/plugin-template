var l=require("enmity/ui/settings"),d=require("enmity/managers"),u="AvatarChanger",y="1.0.0",g="Changes your client-side profile picture to that of a specified Discord user ID.",v=[{name:"clockwrks",id:"383296127396610049"}],k="#000001",p={id:"userId",name:"Target User ID",type:"text"},b={name:u,version:y,description:g,authors:v,color:k,settings:p};function N(e){window.enmity.plugins.registerPlugin(e)}window.enmity.modules.common.Constants,window.enmity.modules.common.Clipboard,window.enmity.modules.common.Assets,window.enmity.modules.common.Messages,window.enmity.modules.common.Clyde,window.enmity.modules.common.Avatars,window.enmity.modules.common.Native;const h=window.enmity.modules.common.React;window.enmity.modules.common.Dispatcher,window.enmity.modules.common.Storage,window.enmity.modules.common.Toasts,window.enmity.modules.common.Dialog,window.enmity.modules.common.Token,window.enmity.modules.common.REST,window.enmity.modules.common.Settings,window.enmity.modules.common.Users,window.enmity.modules.common.Navigation,window.enmity.modules.common.NavigationNative,window.enmity.modules.common.NavigationStack,window.enmity.modules.common.Theme,window.enmity.modules.common.Linking,window.enmity.modules.common.StyleSheet,window.enmity.modules.common.ColorMap,window.enmity.modules.common.Components,window.enmity.modules.common.Locale,window.enmity.modules.common.Profiles,window.enmity.modules.common.Lodash,window.enmity.modules.common.Logger,window.enmity.modules.common.Flux,window.enmity.modules.common.SVG,window.enmity.modules.common.Scenes,window.enmity.modules.common.Moment;const r={byProps:(...e)=>window.enmity.modules.filters.byProps(...e),byName:(e,n)=>window.enmity.modules.filters.byName(e,n),byTypeName:(e,n)=>window.enmity.modules.filters.byTypeName(e,n),byDisplayName:(e,n)=>window.enmity.modules.filters.byDisplayName(e,n)};function P(...e){return window.enmity.modules.bulk(...e)}window.enmity.modules.common;const S=({settings:e})=>{const n={...d.Data.load("NicknamePlugin","settings")||{active:!0,nickname:""}},m=o=>{Object.assign(n,o),d.Data.save("NicknamePlugin","settings",n),e!=null&&e.onChange&&e.onChange("NicknamePlugin","settings",n)};return l.buildPanel(l.SettingsSwitch({name:"Active",note:"Enable local nickname override",value:n.active,onValueChange:o=>m({active:o})}),l.SettingsText({name:"Nickname",note:"Enter your local nickname",value:n.nickname,placeholder:"Nickname",onValueChange:o=>m({nickname:o})}))},[w,i]=P(r.byProps("getCurrentUser"),r.byProps("getMember","getMembers"));let t,s={active:!0,nickname:""};const C={...b,onStart(){var e;const n=d.Data.load("NicknamePlugin","settings")||{};if(s={...s,...n},!w||!i)return;const m=(e=w.getCurrentUser())==null?void 0:e.id;!m||(t=i.getMember,i.getMember=(o,c)=>{const a=t.call(i,o,c);return s.active&&c===m?{...a,nick:s.nickname||a.nick}:a},console.log("[NicknamePlugin] Local nickname patch applied."))},onStop(){t&&(i.getMember=t),console.log("[NicknamePlugin] Plugin stopped.")},getSettingsPanel({settings:e}){return h.createElement(S,{settings:e})}};N(C);
