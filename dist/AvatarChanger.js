var h=require("react"),m=require("enmity/modules/toast");function P(e){if(e&&e.__esModule)return e;var r=Object.create(null);return e&&Object.keys(e).forEach(function(s){if(s!=="default"){var o=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(r,s,o.get?o:{enumerable:!0,get:function(){return e[s]}})}}),r.default=e,Object.freeze(r)}var u=P(h),b="AvatarChanger",A="1.0.0",_="Changes your client-side profile picture to that of a specified Discord user ID.",v=[{name:"clockwrks",id:"383296127396610049"}],w="#000001",L={id:"userId",name:"Target User ID",type:"text"},I={name:b,version:A,description:_,authors:v,color:w,settings:L};function O(e){window.enmity.plugins.registerPlugin(e)}const p={byProps:(...e)=>window.enmity.modules.filters.byProps(...e),byName:(e,r)=>window.enmity.modules.filters.byName(e,r),byTypeName:(e,r)=>window.enmity.modules.filters.byTypeName(e,r),byDisplayName:(e,r)=>window.enmity.modules.filters.byDisplayName(e,r)};function d(...e){return window.enmity.modules.bulk(...e)}window.enmity.modules.common;const f={"1117005234301050882":"Alice (LOCAL ALIAS)","1327385107677319299":"SupportBotAlias (LOCAL ALIAS)"},g={...I,onStart(){m.Toasts.show("DualProfileView started");const[e]=d(p.byProps("getUserProfile"));if(!e)return;const r=e.getUserProfile;e.getUserProfile=function(o){const t=r.apply(this,arguments);try{if(t&&t.user&&o&&f[o]){t.localAlias={label:"LOCAL ALIAS VIEW",alias:f[o]};const i=" \u2022 [LOCAL ALIAS]";t.user.username&&!t.user.username.includes(i)&&(t.user.username=t.user.username+i),t.user.display_name&&!t.user.display_name.includes(i)&&(t.user.display_name=t.user.display_name+i)}}catch{}return t};const[s]=d(p.byProps("open","close","isOpen"));if(s&&s.prototype){const o=s.prototype;if(!o.__dualProfilePatched){const t=o.render;o.__dualProfilePatched=!0,o.render=function(){var i;const n=t.apply(this,arguments);try{const c=this.props||this.state||{},l=(i=c.profile)!=null?i:c.userId?e.getUserProfile(c.userId):null;if(l&&l.localAlias){const y=u.createElement("div",{style:{padding:12,marginTop:8,borderTop:"1px solid rgba(0,0,0,0.08)"}},u.createElement("div",{style:{fontWeight:700,marginBottom:6}},l.localAlias.label),u.createElement("div",null,l.localAlias.alias),u.createElement("div",{style:{marginTop:6,fontSize:12,color:"rgba(0,0,0,0.6)"}},"This is a local overlay only. IDs and original data remain unchanged.")),a=n&&n.props&&n.props.children;a&&(Array.isArray(a)?a.push(y):a.props&&Array.isArray(a.props.children)&&a.props.children.push(y))}}catch{}return n}}}this._origGetUserProfile=r,this._origModalProto=s&&s.prototype},onStop(){m.Toasts.show("DualProfileView stopped");try{const[e]=d(p.byProps("getUserProfile"));e&&this._origGetUserProfile&&(e.getUserProfile=this._origGetUserProfile);const r=this._origModalProto;r&&r.__dualProfilePatched&&delete r.__dualProfilePatched}catch{}}};O(g),module.exports=g;
