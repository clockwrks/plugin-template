var a=require("@enmity/patcher"),c=require("@enmity/metro");const o="378986339007201290",u="1388444223610556589",i=" (LOCAL SPOOF)";var d={onStart(){try{const p=c.findByProps("getCurrentUser","getUser"),g=c.findByProps("getUserProfile","getMutualGuilds"),f=c.findByProps("getPrimaryActivity","getActivitiesForUser"),h=c.findByProps("getMember","getMembers");p&&a.Patcher.after("imposter:user-getUser",p,"getUser",(m,t,e)=>{if(!e)return e;const n=t&&t[0]||e.id;if(String(n)===String(u)){const s=p.getUser(String(o));if(!s)return e;const r=Object.create(e);return r.username=(s.username||e.username)+i,r.avatar=s.avatar||e.avatar,r.banner=s.banner||e.banner,r.globalName=s.globalName?s.globalName+i:s.globalName,r.id=e.id,r}return e}),g&&(a.Patcher.after("imposter:userprofile-getUserProfile",g,"getUserProfile",(m,t,e)=>{if(!e)return e;const n=t&&t[0];if(String(n)===String(u)){const s=g.getUserProfile(String(o));if(!s)return e;const r=Object.create(e);return r.badges=s.badges||e.badges,r.bio=(s.bio||e.bio||"")+" [LOCAL SPOOF]",r.profileEffectId=s.profileEffectId||e.profileEffectId,r.pronouns=s.pronouns||e.pronouns,r.themeColor=s.themeColor||e.themeColor,r}return e}),a.Patcher.after("imposter:userprofile-getMutualGuilds",g,"getMutualGuilds",(m,t,e)=>{if(!t)return e;const n=t[0];return String(n)===String(u)&&g.getMutualGuilds(String(o))||e})),f&&a.Patcher.after("imposter:presence-getPrimaryActivity",f,"getPrimaryActivity",(m,t,e)=>{if(!t)return e;const n=t[0];return String(n)===String(u)&&f.getPrimaryActivity(String(o))||e}),h&&a.Patcher.after("imposter:guildmember-getMember",h,"getMember",(m,t,e)=>{if(!t)return e;const n=t[0],s=t[1];if(String(s)===String(u)){const r=h.getMember(n,String(o)),l=p.getUser(String(o));if(!l)return e;const b=Object.create(e);return b.nick=r&&r.nick?r.nick+i:l.globalName?l.globalName+i:l.username+i,b}return e});const P=c.findByProps("Author","Timestamp");P&&P.Author&&a.Patcher.after("imposter:message-author",P,"Author",(m,t,e)=>{try{e&&e.props&&e.props.message&&e.props.message.author&&String(e.props.message.author.id)===String(u)&&e.props.message.author.username&&!e.props.message.author.username.includes(i)&&(e.props.message.author.username=String(e.props.message.author.username)+i)}catch{}return e})}catch{}},onStop(){try{a.Patcher.unpatchAll("imposter:user-getUser"),a.Patcher.unpatchAll("imposter:userprofile-getUserProfile"),a.Patcher.unpatchAll("imposter:userprofile-getMutualGuilds"),a.Patcher.unpatchAll("imposter:presence-getPrimaryActivity"),a.Patcher.unpatchAll("imposter:guildmember-getMember"),a.Patcher.unpatchAll("imposter:message-author"),a.Patcher.unpatchAll("imposter")}catch{}}};module.exports=d;
